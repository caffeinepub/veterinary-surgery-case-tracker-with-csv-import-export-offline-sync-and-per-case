{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "App deployment with backend canister for loading surgery cases; live app currently failing to load cases due to backend error/trap and user requested applying a stricter fix to prevent large-list traps.",
  "architectural_notes": [
    "Backend canister case-loading should use a safer storage/loading pattern to avoid trapping on large datasets (e.g., avoid returning/processing full large lists in one call)."
  ],
  "known_issues": [
    "Live app shows 'Server Cases Loading Failed' due to backend canister error/trap when loading surgery cases (previously observed heap out-of-bounds in getAllSurgeryCases)."
  ],
  "isFixRequest": true,
  "existing_features": [],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Apply stricter backend fix: switch surgery-cases storage/loading to a safer pattern to prevent traps (e.g., large list/heap out-of-bounds) and restore stable case loading.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-2",
      "summary": "Update the Motoko backend so loading surgery cases cannot trap due to large datasets (e.g., \"heap out of bounds\"), by refactoring the per-user surgery-case storage and all read paths to avoid materializing an unbounded list in memory.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Make `syncLocalChanges(localCases)` safe for large numbers of cases by ensuring it does not perform quadratic scans over the full dataset and does not require building full intermediate arrays/lists that scale with total case count beyond a bounded, linear pass.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Surgery Case Tracker",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}
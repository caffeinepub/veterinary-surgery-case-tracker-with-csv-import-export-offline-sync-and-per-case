{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "New project",
  "architectural_notes": [],
  "known_issues": [
    "Live app Sync Error: Internet Computer canister tcbtk-yyaaa-aaaaa-qfanq-cai traps with 'heap out of bounds' (Reject code 5 / IC0502) when calling method getAllSurgeryCases, causing replica rejection."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-update-the-frontend-sync-flow-to-avoid-relying-on-unbounded-getallsurgerycases-calls-currently-used-in-frontend-src-hooks-usesync-ts-by-using-the-new-bounded-paginated-backend-retrieval-method-s-and-or-using-incremental-retrieval-e-g-getupdatedcases-so-that-sync-works-even-when-the-user-has-many-cases",
      "title": "Update the frontend sync flow to avoid relying on unbounded getAllSurgeryCases calls (currently used in frontend/src/hooks/useSync.ts) by using the new bounded/paginated backend retrieval method(s) and/or using incremental retrieval (e.g., getUpdatedCases) so that sync works even when the user has many cases.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-frontend-error-handling-for-backend-trap-rejection-errors-during-sync-so-the-user-sees-a-clear-english-message-instead-of-the-raw-replica-rejection-details-while-still-logging-the-raw-error-to-the-console-for-debugging",
      "title": "Improve frontend error handling for backend trap/rejection errors during sync so the user sees a clear English message instead of the raw replica rejection details, while still logging the raw error to the console for debugging.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Modify the backend canister (Canister ID: tcbtk-yyaaa-aaaaa-qfanq-cai) to prevent trapping with \"heap out of bounds\" when calling the query method getAllSurgeryCases by making the retrieval memory-safe (e.g., by adding a bounded/paginated retrieval API and/or limiting allocations during sorting), while preserving existing access control behavior.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Surgery Case Tracker",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}
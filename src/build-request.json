{
  "kind": "build_request",
  "title": "Fix Quick Add paste so Pet Name auto-fills reliably",
  "projectName": "Surgery Case Tracker",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Fix the Quick Add demographics paste flow so that when a user pastes demographics text that contains a pet/patient name, the CaseForm \"Pet Name\" field is populated (as long as the field is currently empty and has not been touched). Investigate and correct the root cause, which may be in the pet-name parsing logic in `extractDemographics` and/or how the extracted value is applied in `CaseForm.handlePasteExtraction`.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages-5"
        ],
        "quotes": [
          "Pet name is not populating when text is pasted in quick add box"
        ]
      },
      "acceptanceCriteria": [
        "Given the CaseForm is open for creating a new case and the Pet Name field is empty and untouched, pasting demographics text into the Quick Add textarea auto-fills the Pet Name field when the pasted text includes a pet/patient name.",
        "If the Pet Name field has already been typed into (touched) or is non-empty, a Quick Add paste does not overwrite the Pet Name field.",
        "A Quick Add paste that includes other demographics continues to behave as before (no regressions to MRN/owner/species/breed/sex/DOB/arrival date/presenting complaint extraction and auto-fill behavior).",
        "User-facing messages/toasts related to Quick Add remain in English."
      ]
    }
  ],
  "constraints": [
    "Do not modify files under `frontend/src/components/ui` (compose existing UI components instead).",
    "Do not edit frontend immutable hook/bootstrap files listed in SYSTEM_CONTEXT (e.g., `frontend/src/main.tsx`, `frontend/src/hooks/useActor.ts`, `frontend/src/hooks/useInternetIdentity.ts`)."
  ],
  "nonGoals": [
    "No backend (Motoko) changes.",
    "No changes to case persistence/sync logic beyond what is necessary to fix Quick Add Pet Name auto-fill."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}
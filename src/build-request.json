{
  "kind": "build_request",
  "title": "Fix case-loading hooks to avoid deprecated getAllSurgeryCases calls",
  "projectName": "Surgery Case Tracker",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Audit all frontend case-loading hooks and flows to ensure there are zero runtime call paths that invoke the deprecated backend method `getAllSurgeryCases()`, and update any remaining references to use the paginated API `getSurgeryCases(start, limit)` (directly or via existing pagination helpers).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Check the case-loading hooks."
        ]
      },
      "acceptanceCriteria": [
        "A repo-wide search over `frontend/src` (excluding generated declarations) finds no references to `getAllSurgeryCases`.",
        "All server-case loading continues to work via pagination (e.g., `useGetSurgeryCasesPaginated` and any sync loaders use `actor.getSurgeryCases(start, limit)`).",
        "The production/live UI no longer shows the banner 'Server Cases Loading Failed' when loading server cases (assuming backend is reachable and user is authenticated)."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Ensure the deployed frontend is using fresh generated backend bindings and is redeployed so that Live cannot call removed legacy APIs.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Check the case-loading hooks."
        ]
      },
      "acceptanceCriteria": [
        "`frontend/src/declarations/backend/backend.did.d.ts` does not include `getAllSurgeryCases`.",
        "Frontend build succeeds without TypeScript errors related to missing backend methods.",
        "Documented redeploy steps (or existing scripts) are followed/validated so the Live deployment uses updated bindings and correct backend canister interface."
      ]
    }
  ],
  "constraints": [
    "Do not edit files under frontend/src/components/ui (shadcn components); compose them instead.",
    "Do not edit immutable hook files: frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useInternetIdentity.tsx, frontend/src/hooks/useActor.ts, frontend/src/main.tsx."
  ],
  "nonGoals": [
    "Adding new case-management features beyond fixing the broken server case loading.",
    "Changing backend data models or reintroducing the removed `getAllSurgeryCases` method."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}